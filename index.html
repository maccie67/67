<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hockey Game</title>
<style>
  body { margin: 0; background: #0b3d91; display: flex; justify-content: center; align-items: center; height: 100vh; }
  canvas { background: white; border: 5px solid black; }
  #instructions, #scoreboard {
    position: absolute;
    padding: 10px;
    background: rgba(0,0,0,0.7);
    color: white;
    font-family: Arial, sans-serif;
    border-radius: 5px;
  }
  #instructions { top: 10px; left: 10px; max-width: 350px; }
  #scoreboard { top: 10px; right: 10px; font-size: 20px; }
</style>
</head>
<body>
<div id="instructions">
<h3>üèí Hockey Game Instructions</h3>
<ul>
<li>‚û°Ô∏è Move with <b>Arrow Keys</b></li>
<li>‚ö´ Touch puck to take control</li>
<li>‚è© Press <b>Space</b> to shoot (not from inside crease)</li>
<li>ü§ù Press <b>Shift</b> to pass to a red teammate</li>
<li>ü•Ö Red scores on blue net (right)</li>
<li>ü•Ö Blue AI scores on red net (left)</li>
<li>First to 5 goals wins!</li>
</ul>
</div>
<div id="scoreboard">Red 0 - 0 Blue</div>
<canvas id="gameCanvas" width="800" height="400"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreboard = document.getElementById("scoreboard");

let keys = {};
let score = { red: 0, blue: 0 };
document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

class Player {
  constructor(x, y, color, isAI=false, isGoalie=false, team="red") {
    this.x = x; this.y = y;
    this.color = color;
    this.radius = 10;
    this.speed = 2.5;
    this.isAI = isAI;
    this.isGoalie = isGoalie;
    this.team = team;
    this.passCooldown = 0;
  }

  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
    ctx.fillStyle = this.color;
    ctx.fill(); ctx.closePath();
  }

  moveAI() {
    if (!this.isAI) return;

    if (this.isGoalie) {
      // Goalies track puck
      let homeX = this.team === "red" ? netLeft.x + netLeft.width + this.radius : netRight.x - this.radius;
      let homeY = puck.y;
      this.x += (homeX - this.x) * 0.05;
      this.y += (homeY - this.y) * 0.05;

      if (this.team === "red") this.x = Math.max(netLeft.x + netLeft.width, Math.min(netLeft.x + netLeft.width + 15, this.x));
      else this.x = Math.max(netRight.x - 15, Math.min(netRight.x, this.x));
      this.y = Math.max(netLeft.y, Math.min(netLeft.y + netLeft.height, this.y));

      // Bounce puck
      let dx = puck.x - this.x, dy = puck.y - this.y;
      if (Math.sqrt(dx*dx + dy*dy) < this.radius + puck.radius + 2) {
        puck.carriedBy = null;
        puck.vx = (Math.random() - 0.5) * 7;
        puck.vy = (Math.random() - 0.5) * 7;
      }
      return;
    }

    // Skater AI
    if (puck.carriedBy === this) {
      // Random pass
      if (this.passCooldown <= 0 && Math.random() < 0.01) {
        this.passToTeammate();
        this.passCooldown = 100;
      } else this.passCooldown--;

      // Skate
      if (this.team === "red") this.x += 2;
      else this.x -= 2;

      // Shoot when close
      if ((this.team==="red" && this.x > canvas.width-150) || 
          (this.team==="blue" && this.x < 150)) {
        this.shoot();
      }
    } else {
      this.x += (puck.x-this.x)*0.015;
      this.y += (puck.y-this.y)*0.015;
    }

    this.avoidTeammates();
  }

  avoidTeammates() {
    let mates = this.team==="red"?team1:team2;
    mates.forEach(m => {
      if (m===this) return;
      let dx=this.x-m.x, dy=this.y-m.y;
      let dist=Math.sqrt(dx*dx+dy*dy);
      if (dist<30) {
        this.x += dx/dist*0.5;
        this.y += dy/dist*0.5;
      }
    });
  }

  passToTeammate() {
    let mates = (this.team==="red"?team1:team2).filter(p=>p!==this && !p.isGoalie);
    if (mates.length>0) {
      let mate = mates[Math.floor(Math.random()*mates.length)];
      puck.carriedBy=null;
      let dx = mate.x - this.x, dy = mate.y - this.y;
      let dist = Math.sqrt(dx*dx+dy*dy);
      puck.vx=dx/dist*6; puck.vy=dy/dist*6;
    }
  }

  shoot() {
    if (puck.carriedBy === this) {
      if (this.team==="red" && inCrease(this,netRight)) return;
      if (this.team==="blue" && inCrease(this,netLeft)) return;
      puck.carriedBy = null;
      puck.vx = this.team==="red"?7:-7;
      puck.vy = (Math.random()-0.5)*5;
    }
  }
}

class Puck {
  constructor(x,y){ this.x=x; this.y=y; this.radius=5; this.vx=0; this.vy=0; this.carriedBy=null; }
  draw(){ ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,Math.PI*2); ctx.fillStyle="black"; ctx.fill(); ctx.closePath(); }
  update(){
    if(this.carriedBy){ this.x=this.carriedBy.x; this.y=this.carriedBy.y; } 
    else { this.x+=this.vx; this.y+=this.vy; this.vx*=0.985; this.vy*=0.985; }
    if(this.x-this.radius<0){ this.x=this.radius; this.vx*=-0.5; }
    if(this.x+this.radius>canvas.width){ this.x=canvas.width-this.radius; this.vx*=-0.5; }
    if(this.y-this.radius<0){ this.y=this.radius; this.vy*=-0.5; }
    if(this.y+this.radius>canvas.height){ this.y=canvas.height-this.radius; this.vy*=-0.5; }
  }
}

function drawRink(){
  ctx.strokeStyle="red"; ctx.lineWidth=2;
  ctx.beginPath(); ctx.moveTo(canvas.width/2,0); ctx.lineTo(canvas.width/2,canvas.height); ctx.stroke();
  ctx.strokeStyle="blue";
  ctx.beginPath(); ctx.moveTo(canvas.width/3,0); ctx.lineTo(canvas.width/3,canvas.height); ctx.stroke();
  ctx.beginPath(); ctx.moveTo(2*canvas.width/3,0); ctx.lineTo(2*canvas.width/3,canvas.height); ctx.stroke();
  ctx.beginPath(); ctx.arc(canvas.width/2,canvas.height/2,40,0,Math.PI*2); ctx.stroke();
  drawCrease(netLeft,"blue"); drawCrease(netRight,"blue");
}

function drawCrease(net,color){ 
  ctx.strokeStyle=color; ctx.lineWidth=2; 
  ctx.beginPath(); 
  ctx.arc(net.x+(net===netLeft?net.width:0),net.y+net.height/2,40,Math.PI/2,-Math.PI/2,net===netRight); 
  ctx.stroke(); 
}
function inCrease(player,net){ 
  let cx=net.x+(net===netLeft?net.width:0),cy=net.y+net.height/2; 
  return Math.sqrt((player.x-cx)**2+(player.y-cy)**2)<40; 
}

let netLeft={x:0,y:150,width:10,height:100}, netRight={x:790,y:150,width:10,height:100};

// ‚úÖ 3 skaters + 1 goalie each
let team1=[
  new Player(100,200,"red",false,false,"red"),
  new Player(80,150,"red",true,false,"red"),
  new Player(80,250,"red",true,false,"red"),
  new Player(50,200,"darkred",true,true,"red")
];
let team2=[
  new Player(700,150,"blue",true,false,"blue"),
  new Player(720,200,"blue",true,false,"blue"),
  new Player(700,250,"blue",true,false,"blue"),
  new Player(750,200,"darkblue",true,true,"blue")
];

let currentPlayer=team1[0];
let puck=new Puck(400,200);

function drawGoals(){ ctx.fillStyle="gray"; ctx.fillRect(netLeft.x,netLeft.y,netLeft.width,netLeft.height); ctx.fillRect(netRight.x,netRight.y,netRight.width,netRight.height); }

function updateScore(){ scoreboard.textContent=`Red ${score.red} - ${score.blue} Blue`; if(score.red>=5){alert("üèÜ Red wins!");resetMatch();} if(score.blue>=5){alert("üèÜ Blue wins!");resetMatch();} }

function checkGoal(){ if(puck.x-puck.radius<=netLeft.x+netLeft.width&&puck.y>netLeft.y&&puck.y<netLeft.y+netLeft.height){score.blue++;updateScore();reset();} if(puck.x+puck.radius>=netRight.x&&puck.y>netRight.y&&puck.y<netRight.y+netRight.height){score.red++;updateScore();reset();} }

function reset(){ puck.x=400;puck.y=200;puck.vx=0;puck.vy=0;puck.carriedBy=null;currentPlayer.x=100;currentPlayer.y=200; }
function resetMatch(){score.red=0;score.blue=0;updateScore();reset();}

function movePlayer(player){
  if(keys["ArrowUp"])player.y-=player.speed;
  if(keys["ArrowDown"])player.y+=player.speed;
  if(keys["ArrowLeft"])player.x-=player.speed;
  if(keys["ArrowRight"])player.x+=player.speed;
  player.x=Math.max(player.radius,Math.min(canvas.width-player.radius,player.x));
  player.y=Math.max(player.radius,Math.min(canvas.height-player.radius,player.y));
  if(keys["Space"]&&puck.carriedBy===player)player.shoot();
  if(keys["ShiftLeft"]&&puck.carriedBy===player){ 
    let mate=team1.find(p=>p!==player&&!p.isGoalie); 
    if(mate){puck.carriedBy=null;let dx=mate.x-player.x,dy=mate.y-player.y,dist=Math.sqrt(dx*dx+dy*dy); puck.vx=dx/dist*6; puck.vy=dy/dist*6;} 
  }
}

function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawRink(); drawGoals();

  if(puck.carriedBy===currentPlayer){ 
    team1.forEach(p=>{ if(p.isAI&&!p.isGoalie){ p.x+=(currentPlayer.x+60-p.x)*0.02; p.y+=(currentPlayer.y+(Math.random()*60-30)-p.y)*0.02;} }); 
  }

  team1.forEach(p=>{ if(p.isAI)p.moveAI(); p.draw(); });
  team2.forEach(p=>{ if(p.isAI)p.moveAI(); p.draw(); });
  movePlayer(currentPlayer);

  puck.update(); puck.draw();

  [...team1,...team2].forEach(p=>{ let dx=p.x-puck.x,dy=p.y-puck.y; if(Math.sqrt(dx*dx+dy*dy)<p.radius+puck.radius&&!puck.carriedBy)puck.carriedBy=p; });

  checkGoal(); requestAnimationFrame(update);
}
update();
</script>
</body>
</html>


     

   
     
